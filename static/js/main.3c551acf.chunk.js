(this["webpackJsonpstable-matching-many-to-one"]=this["webpackJsonpstable-matching-many-to-one"]||[]).push([[0],{298:function(e,t,a){e.exports={table:"individualData_table__2m3cE"}},300:function(e,t,a){e.exports={table:"collegeData_table__3P-d0"}},309:function(e,t,a){e.exports=a(376)},314:function(e,t,a){},315:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(69),l=a.n(i),c=a(65),o=(a(314),a(49)),s=a(64),u=(a(315),Object(n.createContext)(null)),h=a(388),m=a(389),d=a(297),p=a(387),f=function(){return r.a.createElement(h.a,{bg:"dark",variant:"dark",sticky:"top",className:"d-flex justify-content-between"},r.a.createElement(h.a.Brand,{as:c.b,to:"/stable-matching-many-to-one/"},"Matching Optimizier"),r.a.createElement(m.a,{className:"mr-5"},r.a.createElement(m.a.Link,{as:c.b,to:"/stable-matching-many-to-one/step1"},"1. Initialize"),r.a.createElement(m.a.Link,{as:c.b,to:"/stable-matching-many-to-one/step2"},"2. Set Preferences"),r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step3"},"3. Begin matching"),r.a.createElement(p.a,{title:"4. View Results",id:"basic-nav-dropdown"},r.a.createElement(p.a.Item,{as:c.b,to:"/stable-matching-many-to-one/step4/spreadsheets"},"Spreadsheets"),r.a.createElement(p.a.Item,{as:c.b,to:"/stable-matching-many-to-one/step4/charts"},"Charts"),r.a.createElement(p.a.Item,{href:"#action/3.2"},"Log"),r.a.createElement(p.a.Divider,null),r.a.createElement(p.a.Item,{as:c.b,to:"/stable-matching-many-to-one/step4/logtxt"},"Log as txt"))))},g=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(f,null),t)},v=a(382),y=function(){return r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement("h1",null,"Let computers do your matching"),r.a.createElement("p",null,"Having trouble in deciding how to put your employees in different teams/departments? Let the amazing algorithm finds the optimal matches for you."),r.a.createElement("p",null,r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step1"},"Start"))),r.a.createElement("div",{className:"p-4"},r.a.createElement("h1",null,"What problem does it solve?"),r.a.createElement("p",null,"The National Resident Matching Program (NRMP), also called The Match,[1] is a United States-based private non-profit non-governmental organization created in 1952 to place U.S. medical school students into residency training programs located in United States teaching hospitals. Its mission has since expanded to include the placement of U.S. citizen and non-U.S. citizen international medical school students and graduates into residency and fellowship training programs. In addition to the annual Main Residency Match that encompasses more than 43,000 applicants and 31,000 positions, the NRMP conducts Fellowship Matches for more than 60 subspecialties through its Specialties Matching Service (SMS). The NRMP is sponsored by a Board of Directors that includes medical school deans, teaching hospital executives, graduate medical education program directors, medical students and residents, and one public member."),r.a.createElement("div",null,r.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/mFh3JIaMGJo",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),r.a.createElement("h1",null,"How does this work?"),r.a.createElement("div",null,r.a.createElement("p",null,"It finds the best matches between groups and individuals according to their preferences. It uses the"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm",target:"_blank",rel:"noopener noreferrer"},"Gale\u2013Shapley algorithm")," ","for finding the solution."),r.a.createElement("p",null,"The Gale\u2013Shapley algorithm guarantees that the matching it produces is either optimal for the participants on one side of the matching, or for the participants on the other side. It makes sure that all matches are"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Stable_marriage_problem",target:"_blank",rel:"noopener noreferrer"},"stable"),", or in other words, optimal.")),r.a.createElement("div",null,r.a.createElement("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/fudb8DuzQlM",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})),r.a.createElement(d.a,{variant:"primary",href:"https://core.ac.uk/download/pdf/42368869.pdf"},"Academic reference"),r.a.createElement("p",null)))},E=a(385),b=[r.a.createElement("div",null,"Welcome to Matching Optimizier!"),r.a.createElement("div",null,r.a.createElement("div",null,"This short tutorial will walk you through all of the features of this application."),r.a.createElement("div",null,'If you want to dive right in, feel free to press the "Skip Tutorial" button below. Otherwise, press "Next"!'))],O=[r.a.createElement("div",null,"What does this Matching Optimizier do?"),r.a.createElement("div",null,r.a.createElement("div",null,"It finds the best matches between groups and individuals according to their preferences. It uses the"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm",target:"_blank",rel:"noopener noreferrer"},"Gale\u2013Shapley algorithm")," ","for finding the solution."),r.a.createElement("div",null,"The Gale\u2013Shapley algorithm guarantees that the matching it produces is either optimal for the participants on one side of the matching, or for the participants on the other side. It makes sure that all matches are"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Stable_marriage_problem",target:"_blank",rel:"noopener noreferrer"},"stable"),", or in other words, optimal."))],k=[r.a.createElement("div",null,"Step 1: Set sizes of party A and B"),r.a.createElement("div",null,r.a.createElement("div",null,"Party A (Persons): Collection of persons who will only be matched to one group."),r.a.createElement("div",null,"Party B (Groups): Collection of groups which can be matched to more than one person, up to its quota."),r.a.createElement("div",null,"In"," ",r.a.createElement(d.a,{variant:"dark",className:"m-2"},"1. Initialize"),"You will set the numbers of members for party A and B respectively."))],x=[r.a.createElement("div",null,"Step 2: Set preferences of each instances of party A and B"),r.a.createElement("div",null,r.a.createElement("div",null,"In"," ",r.a.createElement(d.a,{variant:"dark",className:"m-2"},"2. Set Preferences"),"You will set the preferences of each instances of party A and B respectively, and also set the quota for each of the member in party B."))],w=[r.a.createElement("div",null,"Step 3: Set which side to favour"),r.a.createElement("div",null,r.a.createElement("div",null,"The outcome of the Gale\u2013Shapley algorithm, guarantees that the matching it produces is either optimal for the participants on one side of the matching, or for the participants on the other side."),r.a.createElement("div",null,"In"," ",r.a.createElement(d.a,{variant:"primary",className:"m-2"},"3. Begin matching"),"You will define which side is the favoured side."))],j=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],i=t[1],l=function(){return i(!1)},c=Object(n.useState)(1),s=Object(o.a)(c,2),u=s[0],h=s[1],m="",p="";switch(u){case 1:m=b[0],p=b[1];break;case 2:m=O[0],p=O[1];break;case 3:m=k[0],p=k[1];break;case 4:m=x[0],p=x[1];break;case 5:m=w[0],p=w[1]}return r.a.createElement(E.a,{show:a,onHide:l,backdrop:"static",keyboard:!1},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,m)),r.a.createElement(E.a.Body,null,p),r.a.createElement(E.a.Footer,{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement(d.a,{variant:"secondary",className:"m-2",onClick:l},"Skip")),r.a.createElement("div",null,u,"/5",1!==u?r.a.createElement(d.a,{variant:"primary",className:"m-2",onClick:function(){return h(u-1)}},"Previous"):null,5!==u?r.a.createElement(d.a,{variant:"primary",className:"m-2",onClick:function(){return h(u+1)}},"Next"):r.a.createElement(d.a,{variant:"primary",className:"m-2",onClick:l},"Start"))))},P=a(391),S=a(390),L=a(383),N=function(e){var t=e.title,a=e.content,n=r.a.createElement(P.a,{id:"popover-basic"},r.a.createElement(P.a.Title,{as:"h3"},t),r.a.createElement(P.a.Content,null,a));return r.a.createElement(S.a,{placement:"right",overlay:n,delay:{show:100,hide:200}},r.a.createElement(L.a,{variant:"info"},"?"))},W=a(146),C=a(56),M=a(384),I=a(298),D=a.n(I),B=a(211),A=function(e){var t=e.isGroup,a=e.idx,i=Object(n.useContext)(u),l=i.collegeData,c=i.setCollegeData,s=i.individualData,h=i.setIndividualData,m=t?l[a].preference:s[a].preference;return r.a.createElement(B.a,{onDragEnd:function(e){if(e.destination){var n=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),i=Object(o.a)(r,1)[0];return n.splice(a,0,i),n}(m,e.source.index,e.destination.index);if(t){var r=l.map((function(e){return e.idx===a?Object(C.a)(Object(C.a)({},e),{},{preference:n}):e}));c(r)}else{var i=s.map((function(e){return e.idx===a?Object(C.a)(Object(C.a)({},e),{},{preference:n}):e}));h(i)}}}},r.a.createElement(B.c,{droppableId:"droppable",direction:"horizontal"},(function(e,a){return r.a.createElement("div",Object.assign({ref:e.innerRef,style:(n=a.isDraggingOver,{background:n?"lightblue":"lightgrey",display:"flex",padding:8,overflow:"auto"})},e.droppableProps),m.map((function(e,a){return r.a.createElement(B.b,{key:e,draggableId:"".concat(e),index:a},(function(a,n){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:(i=n.isDragging,c=a.draggableProps.style,Object(C.a)({userSelect:"none",padding:16,margin:"0 ".concat(8,"px 0 0"),background:i?"lightgreen":"grey"},c))}),t?s[e].name:l[e].name);var i,c}))})),e.placeholder);var n})))},R=function(){var e=Object(n.useContext)(u),t=e.individualData,a=e.setIndividualData;return r.a.createElement("div",{className:D.a.table},r.a.createElement(M.a,{size:"sm",striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Preferences (leftmost being most preferred)"))),r.a.createElement("tbody",null,t.map((function(e,n){return r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null," ",r.a.createElement("input",{type:"text",id:"individual-".concat(n,"-name"),name:"name",value:t[n].name,onChange:function(e){return function(e,n){var r=t.map((function(t){return t.idx===n?Object(C.a)(Object(C.a)({},t),{},Object(W.a)({},e.target.name,e.target.value)):t}));a(r)}(e,n)}})),r.a.createElement("td",null,r.a.createElement(A,{isGroup:!1,idx:n})))})))))},q=a(300),T=a.n(q),z=function(){var e=Object(n.useContext)(u),t=e.collegeData,a=e.setCollegeData,i=function(e,n){var r=t.map((function(t){return t.idx===n?Object(C.a)(Object(C.a)({},t),{},Object(W.a)({},e.target.name,e.target.value)):t}));a(r)};return r.a.createElement("div",{className:T.a.table},r.a.createElement(M.a,{size:"sm",striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quota"),r.a.createElement("th",null,"Preferences (leftmost being most preferred)"))),r.a.createElement("tbody",null,t.map((function(e,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null," ",r.a.createElement("input",{type:"text",id:"college-".concat(a,"-name"),name:"name",value:t[a].name,onChange:function(e){return i(e,a)}})),r.a.createElement("td",null,r.a.createElement("input",{type:"number",id:"college-".concat(a,"-quota"),name:"quota",value:t[a].quota,onChange:function(e){return i(e,a)}})),r.a.createElement("td",null,r.a.createElement(A,{isGroup:!0,idx:a})))})))))},_=function(e){var t=e.history,a=Object(n.useContext)(u),i=a.initiated,l=a.collegeData,s=Object(n.useState)(!1),h=Object(o.a)(s,2),m=h[0],p=h[1];return r.a.createElement("div",null,r.a.createElement("h3",null,"Step 2. Set preferences"),i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Party A"," ",r.a.createElement(N,{title:"Party A",content:r.a.createElement("div",null,"Party A represents the ",r.a.createElement("strong",null,"student/applicant side")," ","which can only be matched with at most one member of party B.")})),r.a.createElement(R,null),r.a.createElement("br",null),r.a.createElement("div",null,"Party B"," ",r.a.createElement(N,{title:"Party B",content:r.a.createElement("div",null,"Party B represents the ",r.a.createElement("strong",null,"college/hospital side")," ","with a positive integral quota equal or larger than 1")})),r.a.createElement(z,null)):r.a.createElement("div",null,"You have not yet set the sizes of the two sides."),r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step1",style:{margin:"20px"}},"Previous step"),i?r.a.createElement(d.a,{variant:"primary",onClick:function(e){e.preventDefault(),0==l.reduce((function(e,t){return e+parseInt(t.quota)}),0)?p(!0):t.push("/stable-matching-many-to-one/step3")},style:{margin:"20px"}},"Next step"):null),r.a.createElement(E.a,{show:m,onHide:function(){return p(!1)},backdrop:"static",keyboard:!1},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,"Invalid input")),r.a.createElement(E.a.Body,null,"Quota of party B must be larger than zero!"),r.a.createElement(E.a.Footer,{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement(d.a,{variant:"secondary",className:"m-2",onClick:function(){return p(!1)}},"OK")))))},F=function(e){var t=e.history,a=Object(n.useContext)(u),i=a.stuN,l=a.setStuN,c=a.colN,s=a.setColN,h=a.initiated,m=a.initiate,p=a.setCollegeData,f=a.setIndividualData,g=Object(n.useState)(!1),v=Object(o.a)(g,2),y=v[0],b=v[1],O=function(e){for(var t=[],a=0;a<e;a++)t.push({idx:a,name:"Group ".concat(a),quota:0,preference:Array.from(Array(parseInt(i)).keys())});return t},k=function(e){for(var t=[],a=0;a<e;a++)t.push({idx:a,name:"Person ".concat(a),preference:Array.from(Array(parseInt(c)).keys())});return t};return r.a.createElement("div",null,r.a.createElement("h3",null,"Step 1. Initialize"),r.a.createElement("div",null,"Party A"," ",r.a.createElement(N,{title:"Party A",content:r.a.createElement("div",null,"Party A represents the ",r.a.createElement("strong",null,"student/applicant side")," ","which can only be matched with at most one member of party B.")})),r.a.createElement("form",null,r.a.createElement("label",null,"No. of individuals (e.g. applicants/trainees/employees):"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",id:"stuN",name:"stuN",value:i,onChange:function(e){return l(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("div",null,"Party B"," ",r.a.createElement(N,{title:"Party B",content:r.a.createElement("div",null,"Party B represents the ",r.a.createElement("strong",null,"college/hospital side")," ","with a positive integral quota equal or larger than 1")})),r.a.createElement("label",null,"No. of Party B (e.g. colleges/teams/departments):"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",id:"colN",name:"colN",value:c,onChange:function(e){return s(e.target.value)}}),r.a.createElement(d.a,{onClick:function(e){e.preventDefault(),0==c||0==i?b(!0):(p(O(c)),f(k(i)),m(!0),t.push("/stable-matching-many-to-one/step2"))},variant:"primary",className:"d-block"},h?"Reset":"Set up")),r.a.createElement(E.a,{show:y,onHide:function(){return b(!1)},backdrop:"static",keyboard:!1},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,"Invalid input")),r.a.createElement(E.a.Body,null,"Sizes of party A/B must be larger than zero!"),r.a.createElement(E.a.Footer,{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement(d.a,{variant:"secondary",className:"m-2",onClick:function(){return b(!1)}},"OK")))))},H=a(386),G=a(124),Y=a(125),Q=function(){function e(){Object(G.a)(this,e),this.count=0}return Object(Y.a)(e,[{key:"createID",value:function(){var e=this.count;return this.count+=1,e}},{key:"reset",value:function(){this.count=0}}]),e}(),U=new Q,J=function(){function e(t,a){Object(G.a)(this,e),this.id=U.createID(),this.matchedWith=null,this.nextProposal=0,this.proposedToAll=!1,this.appliedBy=[],this.name=t,this.priorityList=a,this.rankingOfMatch=-1}return Object(Y.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("Person.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"proposeTo",value:function(){return this.nextProposal++,this.nextProposal===this.priorityList.length&&(this.proposedToAll=!0),this.priorityList[this.nextProposal-1]}},{key:"reviewWaitingList",value:function(){if(0===this.appliedBy.length)return null;var e=this.appliedBy;null!==this.matchedWith&&e.push(this.matchedWith);var t=this;e.sort((function(e,a){var n=t.priorityList.indexOf(e),r=t.priorityList.indexOf(a);return n<r?-1:n>r?1:void 0})),this.appliedBy=[];var a=null,n=null;return e[0]!==this.matchedWith&&(a=e[0],n=this.matchedWith,this.matchedWith=a),[a,n]}},{key:"toString",value:function(){return"Student {id: "+this.id+", matchedWith: "+this.matchedWith+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,a){e+=0===a?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){this.rankingOfMatch=this.priorityList.indexOf(this.matchedWith)}},{key:"resetID",value:function(){U.reset()}}]),e}(),K=new Q,V=function(){function e(t,a,n){Object(G.a)(this,e),this.id=K.createID(),this.matchedWith=[],this.appliedBy=[],this.quota=a,this.nextProposal=0,this.proposedToAll=!1,this.name=t,this.priorityList=n,this.rankingOfMatch=[]}return Object(Y.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"proposeTo",value:function(){var e=this.quota-this.matchedWith.length,t=this.priorityList.slice(this.nextProposal,this.nextProposal+e);return this.nextProposal=this.nextProposal+e,this.nextProposal===this.priorityList.length&&(this.proposedToAll=!0),t}},{key:"reviewWaitingList",value:function(){var e=this;if(0===this.appliedBy.length)return null;var t=this.matchedWith,a=this.matchedWith.concat(this.appliedBy),n=this;return a.sort((function(e,t){var a=n.priorityList.indexOf(e),r=n.priorityList.indexOf(t);return a<r?-1:a>r?1:void 0})),a.length>this.quota?this.matchedWith=a.slice(0,this.quota):this.matchedWith=a,this.appliedBy=[],[this.matchedWith.filter((function(e){return!t.includes(e)})),t.filter((function(t){return!e.matchedWith.includes(t)}))]}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("College.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"toString",value:function(){return"College {id: "+this.id+", matchedWith: "+this.matchedWith.toString()+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,a){e+=0===a?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){var e=this;this.matchedWith.forEach((function(t){e.rankingOfMatch.push(e.priorityList.indexOf(t))}))}},{key:"resetID",value:function(){K.reset()}}]),e}();var X=a(245),Z=function(){function e(t,a){Object(G.a)(this,e),this.studentList=t,this.collegeList=a,this.log=[]}return Object(Y.a)(e,[{key:"match",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!t)return this.match_CollegePropose();for(var a=1,n=function(){var t=[];t.push("Round ".concat(a)),e.studentList.forEach((function(a){if(null===a.matchedWith&&!a.proposedToAll){var n=e.collegeList[a.proposeTo()];n.appliedBy.push(a.id),t.push("".concat(a.name," applied to his/her next favorite group which is ").concat(n.name))}})),t.push("---------------------------------------"),e.collegeList.forEach((function(a){if(t.push("".concat(a.name,":")),0===a.appliedBy.length)t.push("".concat(a.name," was not applied by any persons in this round"));else{t.push("".concat(a.name," had ").concat(a.quota-a.matchedWith.length," quota left")),t.push("".concat(a.name," was applied by ").concat(e.printNames(a.appliedBy,!0)," in this round"));var n=a.reviewWaitingList(),r=Object(o.a)(n,2),i=r[0],l=r[1];i.length>0?(t.push("".concat(a.name," combined the previous acceptees with the new applicants this round and made the following decisions in accordance to its preference list and its remaining quota:")),t.push("".concat(a.name," tentatively accepted ").concat(e.printNames(i,!0))),l.length>0&&t.push("".concat(a.name," dropped ").concat(e.printNames(l,!0))),i.forEach((function(t){e.studentList[t].matchedWith=a.id})),l.forEach((function(t){e.studentList[t].matchedWith=null}))):t.push("".concat(a.name," rejected all of its applicants in this round"))}t.push("---------------------------------------")})),a++,t.push("---------------------------------------"),e.log.push(t)};this.existsFreeStudents()&&a<=9999;)n();this.studentList.forEach((function(e){e.setRankingOfMatch()})),this.collegeList.forEach((function(e){e.setRankingOfMatch()})),this.studentList[0].resetID(),this.collegeList[0].resetID()}},{key:"match_CollegePropose",value:function(){for(var e=this,t=1,a=function(){var a=[];a.push("Round ".concat(t)),e.collegeList.forEach((function(t){var n=t.quota-t.matchedWith.length;n>0&&!t.proposedToAll&&(a.push("".concat(t.name," has ").concat(n," quota left")),t.proposeTo().map((function(t){return e.studentList[t]})).forEach((function(e){e.appliedBy.push(t.id),a.push("".concat(t.name," sent invitation to: ").concat(e.name))})))})),a.push("---------------------------------------"),e.studentList.forEach((function(t){if(a.push("".concat(t.name,":")),0===t.appliedBy.length)a.push("".concat(t.name," was not invited by any group in this round"));else{a.push("".concat(t.name," was applied by ").concat(e.printNames(t.appliedBy,!1)," in this round"));var n=t.reviewWaitingList(),r=Object(o.a)(n,2),i=r[0],l=r[1];if(null!==i)if(e.collegeList[i].matchedWith.push(t.id),null===l)a.push("".concat(t.name," chose ").concat(e.collegeList[i].name));else{var c=e.collegeList[l].matchedWith.filter((function(e){return e!==t.id}));e.collegeList[l].matchedWith=c,a.push("".concat(t.name," chose ").concat(e.collegeList[i].name," and dropped the original offer from ").concat(e.collegeList[l].name))}else a.push("".concat(t.name," preferred the original offer from ").concat(e.collegeList[t.matchedWith].name))}a.push("---------------------------------------")})),t++,a.push("---------------------------------------"),e.log.push(a)};this.existsFreeColleges()&&t<=9999;)a();this.studentList.forEach((function(e){e.setRankingOfMatch()})),this.collegeList.forEach((function(e){e.setRankingOfMatch()})),this.studentList[0].resetID(),this.collegeList[0].resetID()}},{key:"existsFreeStudents",value:function(){var e,t=Object(X.a)(this.studentList);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(null===a.matchedWith&&!a.proposedToAll)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"existsFreeColleges",value:function(){var e,t=Object(X.a)(this.collegeList);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.quota-a.matchedWith.length>0&&!a.proposedToAll)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"printNames",value:function(e,t){var a=t?this.studentList:this.collegeList,n=e.map((function(e){return a[e].name})).reduce((function(e,t){return e+" "+t}),"(");return n+=")"}}]),e}();var $=function(e,t,a){var n=function(e,t){var a=[],n=[];return e.forEach((function(e){var t=new J(e.name,e.preference);a.push(t)})),t.forEach((function(e){var t=new V(e.name,e.quota,e.preference);n.push(t)})),[a,n]}(e,t),r=Object(o.a)(n,2),i=r[0],l=r[1],c=new Z(i,l);c.match(a);var s=e.map((function(e,t){return Object(C.a)(Object(C.a)({},e),{},{matchedWith:i[t].matchedWith,isMatched:null!==i[t].matchedWith,matchedWithName:null!==i[t].matchedWith?l[i[t].matchedWith].name:null,rankingOfMatch:i[t].rankingOfMatch,preferenceNames:e.preference.map((function(e){return l[e].name}))})})),u=t.map((function(e,t){return Object(C.a)(Object(C.a)({},e),{},{matchedWith:l[t].matchedWith,quotaLeft:l[t].quota-l[t].matchedWith.length,matchedWithName:l[t].matchedWith.length>0?l[t].matchedWith.map((function(e){return i[e].name})):null,rankingOfMatch:l[t].rankingOfMatch,preferenceNames:e.preference.map((function(e){return i[e].name}))})})),h=s.map((function(e,t){return-1!==e.rankingOfMatch?{stuPreference:e.rankingOfMatch,colPreference:l[i[t].matchedWith].priorityList.indexOf(t),pairing:"".concat(i[t].name," <-> ").concat(l[i[t].matchedWith].name)}:null}));return h=h.filter((function(e){return null!==e})),[s,u,c.log,h]},ee=function(e){var t=e.history,a=Object(n.useContext)(u),i=a.initiated,l=a.collegeData,s=a.setCollegeResult,h=a.individualData,m=a.setIndividualResult,p=(a.logDetails,a.setLogDetails),f=a.setAllPairs,g=a.isFavorStudent,v=a.setIsFavorStudent;return r.a.createElement("div",null,r.a.createElement("h3",null,"Step 3. Begin matching"),i?r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("div",{key:"inline-radio",className:"mb-3"},r.a.createElement(H.a.Check,{inline:!0,label:"Favour party A (individual side)",type:"radio",id:"inline-radio-1",name:"exampleRadios",checked:g,onChange:function(){v(!0)}}),r.a.createElement(H.a.Check,{inline:!0,label:"Favour party B (group side)",type:"radio",id:"inline-radio-2",name:"exampleRadios",checked:!g,onChange:function(){v(!1)}}))),r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step2",style:{margin:"20px"}},"Previous step"),r.a.createElement(d.a,{onClick:function(e){e.preventDefault();var a=$(h,l,g),n=Object(o.a)(a,4),r=n[0],i=n[1],c=n[2],u=n[3];s(i),m(r),p(c),f(u),t.push("/stable-matching-many-to-one/step4/spreadsheets")},style:{margin:"20px"}},"Begin matching")):r.a.createElement("div",null,r.a.createElement("div",null,"You have not yet set the sizes of the two sides."),r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step1",style:{margin:"20px"}},"Return to setup")))},te=(a(322),a(306)),ae=function(e){var t=e.data,a=e.isStu,n=a?t.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{rankingOfMatch:e.rankingOfMatch+1})})):t.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{rankingOfMatch:e.rankingOfMatch.map((function(e){return e+1}))})})),i=a?{data:n,dataSchema:{idx:null,name:null,preferenceNames:null,matchedWithName:null,rankingOfMatch:null,isMatched:null},startCols:6,colHeaders:["ID","Name","Matched with","Ranking of its match","Is matched?","Original preference"],rowHeaders:!0,columns:[{data:"idx"},{data:"name"},{data:"matchedWithName"},{data:"rankingOfMatch"},{data:"isMatched"},{data:"preferenceNames"}],licenseKey:"non-commercial-and-evaluation"}:{data:n,dataSchema:{idx:null,name:null,quota:null,preferenceNames:null,matchedWithName:null,rankingOfMatch:null,quotaLeft:null},startCols:7,colHeaders:["ID","Name","Quota","Matched with","Ranking of its match","Quota left","Original preference"],rowHeaders:!0,columns:[{data:"idx"},{data:"name"},{data:"quota"},{data:"matchedWithName"},{data:"rankingOfMatch"},{data:"quotaLeft"},{data:"preferenceNames"}],licenseKey:"non-commercial-and-evaluation"};return r.a.createElement("div",null,r.a.createElement("div",null,a?"Matching result of the individuals:":"Matching result of the groups:"),r.a.createElement(te.a,{settings:i}))},ne=function(){var e=Object(n.useContext)(u),t=e.individualResult,a=e.collegeResult;return r.a.createElement("div",null,a.length>0?r.a.createElement(ae,{isStu:!1,data:a}):null,t.length>0?r.a.createElement(ae,{isStu:!0,data:t}):null,r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step4/charts"},"View Charts"),r.a.createElement(d.a,{variant:"primary",as:c.b,to:"/stable-matching-many-to-one/step4/logtxt"},"View Log"))},re=(a(356),a(117)),ie=function(e){var t=e.data,a=e.stuN,i=e.colN,l=Object(n.useState)(),c=Object(o.a)(l,2),s=c[0],u=c[1],h=t.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{stuPreference:e.stuPreference+1,colPreference:e.colPreference+1})}));return r.a.createElement(re.f,{xDomain:[-1,i+1],yDomain:[-1,a+1],getX:function(e){return e.stuPreference},getY:function(e){return e.colPreference},width:500,height:300,margin:50,onMouseLeave:function(){return u(null)}},r.a.createElement(re.c,{sizeHexagonsWithCount:!0,animation:!0,className:"hexbin-example",style:{stroke:"#125C77",strokeLinejoin:"round"},colorRange:["orange","cyan"],onValueMouseOver:function(e){u(e)},radius:15,data:h}),r.a.createElement(re.a,{style:{all:{fill:"#fff"}}}),r.a.createElement(re.e,null),r.a.createElement(re.g,null),r.a.createElement(re.b,{text:"Position of selected persons in preference list",className:"alt-x-label",xPercent:.1,yPercent:0,style:{transform:"rotate(90)",textAnchor:"start"}}),r.a.createElement(re.b,{text:"Position of selected groups in preference list",className:"alt-y-label",xPercent:.5,yPercent:.65,style:{textAnchor:"start"}}),s&&r.a.createElement(re.d,{xType:"literal",yType:"literal",getX:function(e){return s[0].stuPreference},getY:function(e){return s[0].colPreference},value:{"personal preference":s[0].stuPreference,"group preference":s[0].colPreference,match:1===s.length?s[0].pairing:"".concat(s[0].pairing," and ").concat(s.length-1," more"),frequency:s.length}}))},le=function(){var e=Object(n.useContext)(u),t=e.stuN,a=e.colN,i=e.allPairs;return r.a.createElement("div",null,i.length>0?r.a.createElement(ie,{data:i,stuN:t,colN:a}):null)},ce=function(){var e=Object(n.useContext)(u).logDetails;return r.a.createElement("div",null,e.map((function(e,t){return r.a.createElement("div",{key:t},e.map((function(e,t){return r.a.createElement("p",{key:t},e)})))})))};var oe=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)(0),c=Object(o.a)(l,2),h=c[0],m=c[1],d=Object(n.useState)(!1),p=Object(o.a)(d,2),f=p[0],v=p[1],E=Object(n.useState)([]),b=Object(o.a)(E,2),O=b[0],k=b[1],x=Object(n.useState)([]),w=Object(o.a)(x,2),P=w[0],S=w[1],L=Object(n.useState)([]),N=Object(o.a)(L,2),W=N[0],C=N[1],M=Object(n.useState)([]),I=Object(o.a)(M,2),D=I[0],B=I[1],A=Object(n.useState)([]),R=Object(o.a)(A,2),q=R[0],T=R[1],z=Object(n.useState)([]),H=Object(o.a)(z,2),G=H[0],Y=H[1],Q=Object(n.useState)(!1),U=Object(o.a)(Q,2),J=U[0],K=U[1];return r.a.createElement(u.Provider,{value:{stuN:a,setStuN:i,colN:h,setColN:m,initiated:f,initiate:v,collegeData:O,setCollegeData:k,individualData:P,setIndividualData:S,collegeResult:W,setCollegeResult:C,individualResult:D,setIndividualResult:B,logDetails:q,setLogDetails:T,allPairs:G,setAllPairs:Y,isFavorStudent:J,setIsFavorStudent:K}},r.a.createElement(g,null,r.a.createElement(j,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/",component:y}),r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/step1",component:F}),r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/step2",component:_}),r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/step3",component:ee}),r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/step4/spreadsheets",component:ne}),r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/step4/charts",component:le}),r.a.createElement(s.a,{exact:!0,path:"/stable-matching-many-to-one/step4/logtxt",component:ce}))))};a(375);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(oe,null))),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.3c551acf.chunk.js.map