(this["webpackJsonpstable-matching-many-to-one"]=this["webpackJsonpstable-matching-many-to-one"]||[]).push([[0],{13:function(e,t,n){e.exports={rowContainer:"individualData_rowContainer__3Xd6e"}},15:function(e,t,n){e.exports={rowContainer:"collegeData_rowContainer__3U01K"}},17:function(e,t,n){e.exports=n(30)},22:function(e,t,n){},23:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(5),c=n.n(r),o=(n(22),n(1)),u=(n(23),Object(a.createContext)(null)),l=n(6),s=n(2),h=n(13),d=n.n(h),p=n(8),f=function(e){var t=e.isGroup,n=e.idx,r=Object(a.useContext)(u),c=r.collegeData,l=r.setCollegeData,h=r.individualData,d=r.setIndividualData,f=t?c[n].preference:h[n].preference;return i.a.createElement(p.a,{onDragEnd:function(e){if(e.destination){var a=function(e,t,n){var a=Array.from(e),i=a.splice(t,1),r=Object(o.a)(i,1)[0];return a.splice(n,0,r),a}(f,e.source.index,e.destination.index);if(t){var i=c.map((function(e){return e.idx===n?Object(s.a)(Object(s.a)({},e),{},{preference:a}):e}));l(i)}else{var r=h.map((function(e){return e.idx===n?Object(s.a)(Object(s.a)({},e),{},{preference:a}):e}));d(r)}}}},i.a.createElement(p.c,{droppableId:"droppable",direction:"horizontal"},(function(e,n){return i.a.createElement("div",Object.assign({ref:e.innerRef,style:(a=n.isDraggingOver,{background:a?"lightblue":"lightgrey",display:"flex",padding:8,overflow:"auto"})},e.droppableProps),f.map((function(e,n){return i.a.createElement(p.b,{key:e,draggableId:"".concat(e),index:n},(function(n,a){return i.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:(r=a.isDragging,o=n.draggableProps.style,Object(s.a)({userSelect:"none",padding:16,margin:"0 ".concat(8,"px 0 0"),background:r?"lightgreen":"grey"},o))}),t?h[e].name:c[e].name);var r,o}))})),e.placeholder);var a})))},m=function(){var e=Object(a.useContext)(u),t=e.individualData,n=e.setIndividualData;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",null,t.map((function(e,a){return i.a.createElement("div",{key:a,className:d.a.rowContainer},i.a.createElement("div",null,"Person ",a),i.a.createElement("div",null,"Name",i.a.createElement("input",{type:"text",id:"individual-".concat(a,"-name"),name:"name",value:t[a].name,onChange:function(e){return function(e,a){var i=t.map((function(t){return t.idx===a?Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},e.target.name,e.target.value)):t}));n(i)}(e,a)}})),i.a.createElement("div",null,"Preference",i.a.createElement(f,{isGroup:!1,idx:a})))}))))},v=n(15),g=n.n(v),y=function(){var e=Object(a.useContext)(u),t=e.collegeData,n=e.setCollegeData,r=function(e,a){var i=t.map((function(t){return t.idx===a?Object(s.a)(Object(s.a)({},t),{},Object(l.a)({},e.target.name,e.target.value)):t}));n(i)};return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",null,t.map((function(e,n){return i.a.createElement("div",{key:n,className:g.a.rowContainer},i.a.createElement("div",null,"Group ",n),i.a.createElement("div",null,"Name",i.a.createElement("input",{type:"text",id:"college-".concat(n,"-name"),name:"name",value:t[n].name,onChange:function(e){return r(e,n)}})),i.a.createElement("div",null,"Quota",i.a.createElement("input",{type:"number",id:"college-".concat(n,"-quota"),name:"quota",value:t[n].quota,onChange:function(e){return r(e,n)}})),i.a.createElement("div",null,"Preference",i.a.createElement(f,{isGroup:!0,idx:n})))}))))},b=function(){var e=Object(a.useContext)(u),t=e.stuN,n=e.setStuN,r=e.colN,c=e.setColN,o=e.initiated,l=e.initiate,s=e.setCollegeData,h=e.setIndividualData,d=function(e){e.preventDefault(),s(p(r)),h(f(t)),l(!0)},p=function(e){for(var n=[],a=0;a<e;a++)n.push({idx:a,name:"Group ".concat(a),quota:0,preference:Array.from(Array(parseInt(t)).keys())});return n},f=function(e){for(var t=[],n=0;n<e;n++)t.push({idx:n,name:"Person ".concat(n),preference:Array.from(Array(parseInt(r)).keys())});return t};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("form",null,i.a.createElement("label",null,"No. of individuals (e.g. applicants/trainees/employees):"),i.a.createElement("br",null),i.a.createElement("input",{type:"number",id:"stuN",name:"stuN",value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement("br",null),i.a.createElement("label",null,"No. of groups (e.g. colleges/teams/departments):"),i.a.createElement("br",null),i.a.createElement("input",{type:"number",id:"colN",name:"colN",value:r,onChange:function(e){return c(e.target.value)}}),o?i.a.createElement("button",{onClick:d},"Reset"):i.a.createElement("button",{onClick:d},"Set up"))),o?i.a.createElement(i.a.Fragment,null,i.a.createElement(m,null),i.a.createElement(y,null)):null)},O=n(3),E=n(4),j=function(){function e(){Object(O.a)(this,e),this.count=0}return Object(E.a)(e,[{key:"createID",value:function(){var e=this.count;return this.count+=1,e}},{key:"reset",value:function(){this.count=0}}]),e}(),k=new j,x=function(){function e(t,n){Object(O.a)(this,e),this.id=k.createID(),this.matchedWith=null,this.nextProposal=0,this.proposedToAll=!1,this.name=t,this.priorityList=n,this.rankingOfMatch=-1}return Object(E.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("Person.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"proposeTo",value:function(){return this.nextProposal++,this.nextProposal===this.priorityList.length&&(this.proposedToAll=!0),this.priorityList[this.nextProposal-1]}},{key:"toString",value:function(){return"Student {id: "+this.id+", matchedWith: "+this.matchedWith+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,n){e+=0===n?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){this.rankingOfMatch=this.priorityList.indexOf(this.matchedWith)}},{key:"resetID",value:function(){k.reset()}}]),e}(),L=new j,D=function(){function e(t,n,a){Object(O.a)(this,e),this.id=L.createID(),this.matchedWith=[],this.appliedBy=[],this.quota=n,this.nextProposal=0,this.name=t,this.priorityList=a,this.rankingOfMatch=[]}return Object(E.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"reviewWaitingList",value:function(){var e=this;if(0===this.appliedBy.length)return null;var t=this.matchedWith,n=this.matchedWith.concat(this.appliedBy),a=this;return n.sort((function(e,t){var n=a.priorityList.indexOf(e),i=a.priorityList.indexOf(t);return n<i?-1:n>i?1:void 0})),n.length>this.quota?this.matchedWith=n.slice(0,this.quota):this.matchedWith=n,this.appliedBy=[],[this.matchedWith.filter((function(e){return!t.includes(e)})),t.filter((function(t){return!e.matchedWith.includes(t)}))]}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("College.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"toString",value:function(){return"College {id: "+this.id+", matchedWith: "+this.matchedWith.toString()+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,n){e+=0===n?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){var e=this;this.matchedWith.forEach((function(t){e.rankingOfMatch.push(e.priorityList.indexOf(t))}))}},{key:"resetID",value:function(){L.reset()}}]),e}();var C=n(16),w=function(){function e(t,n){Object(O.a)(this,e),this.studentList=t,this.collegeList=n,this.log=[]}return Object(E.a)(e,[{key:"match",value:function(){for(var e=this,t=1,n=function(){var n=[];n.push("Round ".concat(t)),e.studentList.forEach((function(t){if(null===t.matchedWith&&!t.proposedToAll){var a=e.collegeList[t.proposeTo()];a.appliedBy.push(t.id),n.push("".concat(t.name," applied to his/her next favorite group which is ").concat(a.name))}})),n.push("---------------------------------------"),e.collegeList.forEach((function(t){if(n.push("".concat(t.name,":")),0===t.appliedBy.length)n.push("".concat(t.name," was not applied by any persons in this round"));else{n.push("".concat(t.name," had ").concat(t.quota-t.matchedWith.length," quota left")),n.push("".concat(t.name," was applied by ").concat(e.printStudentNames(t.appliedBy)," in this round"));var a=t.reviewWaitingList(),i=Object(o.a)(a,2),r=i[0],c=i[1];r.length>0?(n.push("".concat(t.name," combined the previous acceptees with the new applicants this round and made the following decisions in accordance to its preference list and its remaining quota:")),n.push("".concat(t.name," tentatively accepted ").concat(e.printStudentNames(r))),c.length>0&&n.push("".concat(t.name," dropped ").concat(e.printStudentNames(c))),r.forEach((function(n){e.studentList[n].matchedWith=t.id})),c.forEach((function(t){e.studentList[t].matchedWith=null}))):n.push("".concat(t.name," rejected all of its applicants in this round"))}n.push("---------------------------------------")})),t++,n.push("---------------------------------------"),e.log.push(n)};this.existsFreeStudents()&&t<=9999;)n();this.studentList.forEach((function(e){e.setRankingOfMatch()})),this.collegeList.forEach((function(e){e.setRankingOfMatch()})),this.studentList[0].resetID(),this.collegeList[0].resetID()}},{key:"existsFreeStudents",value:function(){var e,t=Object(C.a)(this.studentList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null===n.matchedWith&&!n.proposedToAll)return!0}}catch(a){t.e(a)}finally{t.f()}return!1}},{key:"printStudentNames",value:function(e){var t=this,n=e.map((function(e){return t.studentList[e].name})).reduce((function(e,t){return e+" "+t}),"(");return n+=")"}}]),e}();var N=function(e,t){var n=function(e,t){var n=[],a=[];return e.forEach((function(e){var t=new x(e.name,e.preference);n.push(t)})),t.forEach((function(e){var t=new D(e.name,e.quota,e.preference);a.push(t)})),[n,a]}(e,t),a=Object(o.a)(n,2),i=a[0],r=a[1],c=new w(i,r);return c.match(),[e.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{matchedWith:i[t].matchedWith,rankingOfMatch:i[t].rankingOfMatch})})),t.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{matchedWith:r[t].matchedWith,rankingOfMatch:r[t].rankingOfMatch})})),c.log]},S=function(){var e=Object(a.useContext)(u),t=e.initiated,n=e.collegeData,r=e.setCollegeResult,c=e.individualData,l=e.setIndividualResult,s=(e.individualResult,e.collegeResult,e.logDetails),h=e.setLogDetails;return i.a.createElement("div",null,t?i.a.createElement("button",{onClick:function(e){e.preventDefault();var t=N(c,n),a=Object(o.a)(t,3),i=a[0],u=a[1],s=a[2];r(u),l(i),h(s)}},"Begin matching"):null,s.map((function(e,t){return i.a.createElement("div",{key:t},e.map((function(e,t){return i.a.createElement("p",{key:t},e)})))})))};var W=function(){var e=Object(a.useState)(0),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),l=Object(o.a)(c,2),s=l[0],h=l[1],d=Object(a.useState)(!1),p=Object(o.a)(d,2),f=p[0],m=p[1],v=Object(a.useState)([]),g=Object(o.a)(v,2),y=g[0],O=g[1],E=Object(a.useState)([]),j=Object(o.a)(E,2),k=j[0],x=j[1],L=Object(a.useState)([]),D=Object(o.a)(L,2),C=D[0],w=D[1],N=Object(a.useState)([]),W=Object(o.a)(N,2),P=W[0],I=W[1],R=Object(a.useState)([]),M=Object(o.a)(R,2),q=M[0],A=M[1];return i.a.createElement(u.Provider,{value:{stuN:n,setStuN:r,colN:s,setColN:h,initiated:f,initiate:m,collegeData:y,setCollegeData:O,individualData:k,setIndividualData:x,collegeResult:C,setCollegeResult:w,individualResult:P,setIndividualResult:I,logDetails:q,setLogDetails:A}},i.a.createElement("div",{className:"App"},i.a.createElement("div",null,"many to one"),i.a.createElement("div",null,"stable matching"),i.a.createElement(b,null),i.a.createElement(S,null)))};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(W,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.1ada8e30.chunk.js.map