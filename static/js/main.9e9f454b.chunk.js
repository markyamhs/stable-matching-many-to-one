(this["webpackJsonpstable-matching-many-to-one"]=this["webpackJsonpstable-matching-many-to-one"]||[]).push([[0],{296:function(e,t,a){e.exports={rowContainer:"individualData_rowContainer__3Xd6e"}},298:function(e,t,a){e.exports={rowContainer:"collegeData_rowContainer__3U01K"}},308:function(e,t,a){e.exports=a(376)},313:function(e,t,a){},314:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(68),l=a.n(i),c=a(140),o=(a(313),a(58)),u=a(64),s=(a(314),Object(n.createContext)(null)),h=a(385),m=a(386),d=a(295),f=a(384),p=function(){return r.a.createElement(h.a,{bg:"dark",variant:"dark",sticky:"top",className:"d-flex justify-content-between"},r.a.createElement(h.a.Brand,{as:c.b,to:"/"},"Matching Optimizier"),r.a.createElement(m.a,{className:"mr-5"},r.a.createElement(m.a.Link,{as:c.b,to:"/"},"1. Initialize"),r.a.createElement(m.a.Link,{href:"#features"},"2. Set Preferences"),r.a.createElement(d.a,{variant:"outline-info"},"3. Begin matching"),r.a.createElement(f.a,{title:"4. View Results",id:"basic-nav-dropdown"},r.a.createElement(f.a.Item,{href:"#action/3.1"},"Spreadsheets"),r.a.createElement(f.a.Item,{href:"#action/3.3"},"Charts"),r.a.createElement(f.a.Item,{href:"#action/3.2"},"Log"),r.a.createElement(f.a.Divider,null),r.a.createElement(f.a.Item,{href:"#action/3.4"},"Log as txt"))))},g=function(e){var t=e.children;return r.a.createElement("div",null,r.a.createElement(p,null),t)},v=a(383),E=[r.a.createElement("div",null,"Welcome to Matching Optimizier!"),r.a.createElement("div",null,r.a.createElement("div",null,"This short tutorial will walk you through all of the features of this application."),r.a.createElement("div",null,'If you want to dive right in, feel free to press the "Skip Tutorial" button below. Otherwise, press "Next"!'))],b=[r.a.createElement("div",null,"What does this Matching Optimizier do?"),r.a.createElement("div",null,r.a.createElement("div",null,"It finds the best matches between groups and individuals according to their preferences. It uses the"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Gale%E2%80%93Shapley_algorithm",target:"_blank",rel:"noopener noreferrer"},"Gale\u2013Shapley algorithm")," ","for finding the solution."),r.a.createElement("div",null,"The Gale\u2013Shapley algorithm guarantees that the matching it produces is either optimal for the participants on one side of the matching, or for the participants on the other side. It makes sure that all matches are"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Stable_marriage_problem",target:"_blank",rel:"noopener noreferrer"},"stable"),", or in other words, optimal."))],y=[r.a.createElement("div",null,"Step 1: Define party A and B"),r.a.createElement("div",null,r.a.createElement("div",null,"Party A (Persons): Collection of persons who will only be matched to one group."),r.a.createElement("div",null,"Party B (Groups): Collection of groups which can be matched to more than one person, up to its quota."),r.a.createElement("div",null,"In"," ",r.a.createElement(d.a,{variant:"primary",className:"m-2"},"1. Initialize"),"You will set the numbers of members for party A and B respectively, and also set the quota for each of the member in party B."))],O=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],i=t[1],l=function(){return i(!1)},c=Object(n.useState)(1),u=Object(o.a)(c,2),s=u[0],h=u[1],m="",f="";switch(s){case 1:m=E[0],f=E[1];break;case 2:m=b[0],f=b[1];break;case 3:m=y[0],f=y[1]}return r.a.createElement(v.a,{show:a,onHide:l,backdrop:"static",keyboard:!1},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,m)),r.a.createElement(v.a.Body,null,f),r.a.createElement(v.a.Footer,{className:"d-flex justify-content-between"},r.a.createElement("div",null,r.a.createElement(d.a,{variant:"secondary",className:"m-2",onClick:l},"Skip")),r.a.createElement("div",null,s,"/5",1!==s?r.a.createElement(d.a,{variant:"primary",className:"m-2",onClick:function(){return h(s-1)}},"Previous"):null,5!==s?r.a.createElement(d.a,{variant:"primary",className:"m-2",onClick:function(){return h(s+1)}},"Next"):r.a.createElement(d.a,{variant:"primary",className:"m-2",onClick:l},"Start"))))},k=a(388),j=a(387),x=a(382),N=function(){var e=r.a.createElement(k.a,{id:"popover-basic"},r.a.createElement(k.a.Title,{as:"h3"},"Popover right"),r.a.createElement(k.a.Content,null,"And here's some ",r.a.createElement("strong",null,"amazing")," content. It's very engaging. right?"));return r.a.createElement(j.a,{placement:"right",overlay:e},r.a.createElement(x.a,{variant:"info"},"?"))},w=a(144),P=a(55),L=a(296),S=a.n(L),C=a(209),W=function(e){var t=e.isGroup,a=e.idx,i=Object(n.useContext)(s),l=i.collegeData,c=i.setCollegeData,u=i.individualData,h=i.setIndividualData,m=t?l[a].preference:u[a].preference;return r.a.createElement(C.a,{onDragEnd:function(e){if(e.destination){var n=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),i=Object(o.a)(r,1)[0];return n.splice(a,0,i),n}(m,e.source.index,e.destination.index);if(t){var r=l.map((function(e){return e.idx===a?Object(P.a)(Object(P.a)({},e),{},{preference:n}):e}));c(r)}else{var i=u.map((function(e){return e.idx===a?Object(P.a)(Object(P.a)({},e),{},{preference:n}):e}));h(i)}}}},r.a.createElement(C.c,{droppableId:"droppable",direction:"horizontal"},(function(e,a){return r.a.createElement("div",Object.assign({ref:e.innerRef,style:(n=a.isDraggingOver,{background:n?"lightblue":"lightgrey",display:"flex",padding:8,overflow:"auto"})},e.droppableProps),m.map((function(e,a){return r.a.createElement(C.b,{key:e,draggableId:"".concat(e),index:a},(function(a,n){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:(i=n.isDragging,c=a.draggableProps.style,Object(P.a)({userSelect:"none",padding:16,margin:"0 ".concat(8,"px 0 0"),background:i?"lightgreen":"grey"},c))}),t?u[e].name:l[e].name);var i,c}))})),e.placeholder);var n})))},D=function(){var e=Object(n.useContext)(s),t=e.individualData,a=e.setIndividualData;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,t.map((function(e,n){return r.a.createElement("div",{key:n,className:S.a.rowContainer},r.a.createElement("div",null,"Person ",n),r.a.createElement("div",null,"Name",r.a.createElement("input",{type:"text",id:"individual-".concat(n,"-name"),name:"name",value:t[n].name,onChange:function(e){return function(e,n){var r=t.map((function(t){return t.idx===n?Object(P.a)(Object(P.a)({},t),{},Object(w.a)({},e.target.name,e.target.value)):t}));a(r)}(e,n)}})),r.a.createElement("div",null,"Preference",r.a.createElement(W,{isGroup:!1,idx:n})))}))))},M=a(298),I=a.n(M),q=function(){var e=Object(n.useContext)(s),t=e.collegeData,a=e.setCollegeData,i=function(e,n){var r=t.map((function(t){return t.idx===n?Object(P.a)(Object(P.a)({},t),{},Object(w.a)({},e.target.name,e.target.value)):t}));a(r)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,t.map((function(e,a){return r.a.createElement("div",{key:a,className:I.a.rowContainer},r.a.createElement("div",null,"Group ",a),r.a.createElement("div",null,"Name",r.a.createElement("input",{type:"text",id:"college-".concat(a,"-name"),name:"name",value:t[a].name,onChange:function(e){return i(e,a)}})),r.a.createElement("div",null,"Quota",r.a.createElement("input",{type:"number",id:"college-".concat(a,"-quota"),name:"quota",value:t[a].quota,onChange:function(e){return i(e,a)}})),r.a.createElement("div",null,"Preference",r.a.createElement(W,{isGroup:!0,idx:a})))}))))},R=function(){var e=Object(n.useContext)(s),t=e.stuN,a=e.setStuN,i=e.colN,l=e.setColN,c=e.initiated,o=e.initiate,u=e.setCollegeData,h=e.setIndividualData,m=function(e){e.preventDefault(),u(d(i)),h(f(t)),o(!0)},d=function(e){for(var a=[],n=0;n<e;n++)a.push({idx:n,name:"Group ".concat(n),quota:0,preference:Array.from(Array(parseInt(t)).keys())});return a},f=function(e){for(var t=[],a=0;a<e;a++)t.push({idx:a,name:"Person ".concat(a),preference:Array.from(Array(parseInt(i)).keys())});return t};return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement("div",null,r.a.createElement("div",null,"Step 1. Initialize"),r.a.createElement("form",null,r.a.createElement("div",null,"Party A ",r.a.createElement(N,null)),r.a.createElement("label",null,"No. of individuals (e.g. applicants/trainees/employees):"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",id:"stuN",name:"stuN",value:t,onChange:function(e){return a(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",null,"No. of groups (e.g. colleges/teams/departments):"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",id:"colN",name:"colN",value:i,onChange:function(e){return l(e.target.value)}}),c?r.a.createElement("button",{onClick:m},"Reset"):r.a.createElement("button",{onClick:m},"Set up"))),c?r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(q,null)):null)},A=a(122),B=a(123),T=function(){function e(){Object(A.a)(this,e),this.count=0}return Object(B.a)(e,[{key:"createID",value:function(){var e=this.count;return this.count+=1,e}},{key:"reset",value:function(){this.count=0}}]),e}(),_=new T,z=function(){function e(t,a){Object(A.a)(this,e),this.id=_.createID(),this.matchedWith=null,this.nextProposal=0,this.proposedToAll=!1,this.name=t,this.priorityList=a,this.rankingOfMatch=-1}return Object(B.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("Person.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"proposeTo",value:function(){return this.nextProposal++,this.nextProposal===this.priorityList.length&&(this.proposedToAll=!0),this.priorityList[this.nextProposal-1]}},{key:"toString",value:function(){return"Student {id: "+this.id+", matchedWith: "+this.matchedWith+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,a){e+=0===a?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){this.rankingOfMatch=this.priorityList.indexOf(this.matchedWith)}},{key:"resetID",value:function(){_.reset()}}]),e}(),G=new T,H=function(){function e(t,a,n){Object(A.a)(this,e),this.id=G.createID(),this.matchedWith=[],this.appliedBy=[],this.quota=a,this.nextProposal=0,this.name=t,this.priorityList=n,this.rankingOfMatch=[]}return Object(B.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"reviewWaitingList",value:function(){var e=this;if(0===this.appliedBy.length)return null;var t=this.matchedWith,a=this.matchedWith.concat(this.appliedBy),n=this;return a.sort((function(e,t){var a=n.priorityList.indexOf(e),r=n.priorityList.indexOf(t);return a<r?-1:a>r?1:void 0})),a.length>this.quota?this.matchedWith=a.slice(0,this.quota):this.matchedWith=a,this.appliedBy=[],[this.matchedWith.filter((function(e){return!t.includes(e)})),t.filter((function(t){return!e.matchedWith.includes(t)}))]}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("College.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"toString",value:function(){return"College {id: "+this.id+", matchedWith: "+this.matchedWith.toString()+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,a){e+=0===a?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){var e=this;this.matchedWith.forEach((function(t){e.rankingOfMatch.push(e.priorityList.indexOf(t))}))}},{key:"resetID",value:function(){G.reset()}}]),e}();var F=a(299),K=function(){function e(t,a){Object(A.a)(this,e),this.studentList=t,this.collegeList=a,this.log=[]}return Object(B.a)(e,[{key:"match",value:function(){for(var e=this,t=1,a=function(){var a=[];a.push("Round ".concat(t)),e.studentList.forEach((function(t){if(null===t.matchedWith&&!t.proposedToAll){var n=e.collegeList[t.proposeTo()];n.appliedBy.push(t.id),a.push("".concat(t.name," applied to his/her next favorite group which is ").concat(n.name))}})),a.push("---------------------------------------"),e.collegeList.forEach((function(t){if(a.push("".concat(t.name,":")),0===t.appliedBy.length)a.push("".concat(t.name," was not applied by any persons in this round"));else{a.push("".concat(t.name," had ").concat(t.quota-t.matchedWith.length," quota left")),a.push("".concat(t.name," was applied by ").concat(e.printStudentNames(t.appliedBy)," in this round"));var n=t.reviewWaitingList(),r=Object(o.a)(n,2),i=r[0],l=r[1];i.length>0?(a.push("".concat(t.name," combined the previous acceptees with the new applicants this round and made the following decisions in accordance to its preference list and its remaining quota:")),a.push("".concat(t.name," tentatively accepted ").concat(e.printStudentNames(i))),l.length>0&&a.push("".concat(t.name," dropped ").concat(e.printStudentNames(l))),i.forEach((function(a){e.studentList[a].matchedWith=t.id})),l.forEach((function(t){e.studentList[t].matchedWith=null}))):a.push("".concat(t.name," rejected all of its applicants in this round"))}a.push("---------------------------------------")})),t++,a.push("---------------------------------------"),e.log.push(a)};this.existsFreeStudents()&&t<=9999;)a();this.studentList.forEach((function(e){e.setRankingOfMatch()})),this.collegeList.forEach((function(e){e.setRankingOfMatch()})),this.studentList[0].resetID(),this.collegeList[0].resetID()}},{key:"existsFreeStudents",value:function(){var e,t=Object(F.a)(this.studentList);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(null===a.matchedWith&&!a.proposedToAll)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"printStudentNames",value:function(e){var t=this,a=e.map((function(e){return t.studentList[e].name})).reduce((function(e,t){return e+" "+t}),"(");return a+=")"}}]),e}();var Q=function(e,t){var a=function(e,t){var a=[],n=[];return e.forEach((function(e){var t=new z(e.name,e.preference);a.push(t)})),t.forEach((function(e){var t=new H(e.name,e.quota,e.preference);n.push(t)})),[a,n]}(e,t),n=Object(o.a)(a,2),r=n[0],i=n[1],l=new K(r,i);l.match();var c=e.map((function(e,t){return Object(P.a)(Object(P.a)({},e),{},{matchedWith:r[t].matchedWith,isMatched:null!==r[t].matchedWith,matchedWithName:null!==r[t].matchedWith?i[r[t].matchedWith].name:null,rankingOfMatch:r[t].rankingOfMatch,preferenceNames:e.preference.map((function(e){return i[e].name}))})})),u=t.map((function(e,t){return Object(P.a)(Object(P.a)({},e),{},{matchedWith:i[t].matchedWith,quotaLeft:i[t].quota-i[t].matchedWith.length,matchedWithName:i[t].matchedWith.length>0?i[t].matchedWith.map((function(e){return r[e].name})):null,rankingOfMatch:i[t].rankingOfMatch,preferenceNames:e.preference.map((function(e){return r[e].name}))})})),s=c.map((function(e,t){return-1!==e.rankingOfMatch?{stuPreference:e.rankingOfMatch,colPreference:i[r[t].matchedWith].priorityList.indexOf(t),pairing:"".concat(r[t].name," <-> ").concat(i[r[t].matchedWith].name)}:null}));return s=s.filter((function(e){return null!==e})),[c,u,l.log,s]},X=function(){var e=Object(n.useContext)(s),t=e.initiated,a=e.collegeData,i=e.setCollegeResult,l=e.individualData,c=e.setIndividualResult,u=e.logDetails,h=e.setLogDetails,m=e.setAllPairs;return r.a.createElement("div",null,t?r.a.createElement("button",{onClick:function(e){e.preventDefault();var t=Q(l,a),n=Object(o.a)(t,4),r=n[0],u=n[1],s=n[2],d=n[3];i(u),c(r),h(s),m(d)}},"Begin matching"):null,u.map((function(e,t){return r.a.createElement("div",{key:t},e.map((function(e,t){return r.a.createElement("p",{key:t},e)})))})))},Y=(a(322),a(305)),J=function(e){var t=e.data,a=e.isStu,n=a?t.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{rankingOfMatch:e.rankingOfMatch+1})})):t.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{rankingOfMatch:e.rankingOfMatch.map((function(e){return e+1}))})})),i=a?{data:n,dataSchema:{idx:null,name:null,preferenceNames:null,matchedWithName:null,rankingOfMatch:null,isMatched:null},startCols:6,colHeaders:["ID","Name","Preference","Matched with","Ranking of match","Is Matched"],rowHeaders:!0,columns:[{data:"idx"},{data:"name"},{data:"preferenceNames"},{data:"matchedWithName"},{data:"rankingOfMatch"},{data:"isMatched"}],licenseKey:"non-commercial-and-evaluation"}:{data:n,dataSchema:{idx:null,name:null,quota:null,preferenceNames:null,matchedWithName:null,rankingOfMatch:null,quotaLeft:null},startCols:7,colHeaders:["ID","Name","Quota","Preference","Matched with","Ranking of match","Quota left"],rowHeaders:!0,columns:[{data:"idx"},{data:"name"},{data:"quota"},{data:"preferenceNames"},{data:"matchedWithName"},{data:"rankingOfMatch"},{data:"quotaLeft"}],licenseKey:"non-commercial-and-evaluation"};return r.a.createElement("div",null,r.a.createElement("div",null,a?"Matching result of the individuals:":"Matching result of the groups:"),r.a.createElement(Y.a,{settings:i}))},V=(a(356),a(115)),U=function(e){var t=e.data,a=e.stuN,i=e.colN,l=Object(n.useState)(),c=Object(o.a)(l,2),u=c[0],s=c[1],h=t.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{stuPreference:e.stuPreference+1,colPreference:e.colPreference+1})}));return r.a.createElement(V.f,{xDomain:[-1,i+1],yDomain:[-1,a+1],getX:function(e){return e.stuPreference},getY:function(e){return e.colPreference},width:500,height:300,margin:50,onMouseLeave:function(){return s(null)}},r.a.createElement(V.c,{sizeHexagonsWithCount:!0,animation:!0,className:"hexbin-example",style:{stroke:"#125C77",strokeLinejoin:"round"},colorRange:["orange","cyan"],onValueMouseOver:function(e){s(e)},radius:15,data:h}),r.a.createElement(V.a,{style:{all:{fill:"#fff"}}}),r.a.createElement(V.e,null),r.a.createElement(V.g,null),r.a.createElement(V.b,{text:"Position of selected persons in preference list",className:"alt-x-label",xPercent:.1,yPercent:0,style:{transform:"rotate(90)",textAnchor:"start"}}),r.a.createElement(V.b,{text:"Position of selected groups in preference list",className:"alt-y-label",xPercent:.5,yPercent:.65,style:{textAnchor:"start"}}),u&&r.a.createElement(V.d,{xType:"literal",yType:"literal",getX:function(e){return u[0].stuPreference},getY:function(e){return u[0].colPreference},value:{"personal preference":u[0].stuPreference,"group preference":u[0].colPreference,match:1===u.length?u[0].pairing:"".concat(u[0].pairing," and ").concat(u.length-1," more"),frequency:u.length}}))},Z=function(){var e=Object(n.useContext)(s),t=e.stuN,a=e.colN,i=e.individualResult,l=e.collegeResult,c=e.allPairs;return r.a.createElement("div",null,l.length>0?r.a.createElement(J,{isStu:!1,data:l}):null,i.length>0?r.a.createElement(J,{isStu:!0,data:i}):null,c.length>0?r.a.createElement(U,{data:c,stuN:t,colN:a}):null)};var $=function(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],i=t[1],l=Object(n.useState)(0),c=Object(o.a)(l,2),h=c[0],m=c[1],d=Object(n.useState)(!1),f=Object(o.a)(d,2),p=f[0],v=f[1],E=Object(n.useState)([]),b=Object(o.a)(E,2),y=b[0],O=b[1],k=Object(n.useState)([]),j=Object(o.a)(k,2),x=j[0],N=j[1],w=Object(n.useState)([]),P=Object(o.a)(w,2),L=P[0],S=P[1],C=Object(n.useState)([]),W=Object(o.a)(C,2),D=W[0],M=W[1],I=Object(n.useState)([]),q=Object(o.a)(I,2),A=q[0],B=q[1],T=Object(n.useState)([]),_=Object(o.a)(T,2),z=_[0],G=_[1];return r.a.createElement(s.Provider,{value:{stuN:a,setStuN:i,colN:h,setColN:m,initiated:p,initiate:v,collegeData:y,setCollegeData:O,individualData:x,setIndividualData:N,collegeResult:L,setCollegeResult:S,individualResult:D,setIndividualResult:M,logDetails:A,setLogDetails:B,allPairs:z,setAllPairs:G}},r.a.createElement(g,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:R}),r.a.createElement(u.a,{exact:!0,path:"/run",component:X}),r.a.createElement(u.a,{exact:!0,path:"/results",component:Z}))))};a(375);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement($,null))),document.getElementById("root"))}},[[308,1,2]]]);
//# sourceMappingURL=main.9e9f454b.chunk.js.map