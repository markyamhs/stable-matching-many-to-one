(this["webpackJsonpstable-matching-many-to-one"]=this["webpackJsonpstable-matching-many-to-one"]||[]).push([[0],{243:function(e,t,n){e.exports={rowContainer:"individualData_rowContainer__3Xd6e"}},245:function(e,t,n){e.exports={rowContainer:"collegeData_rowContainer__3U01K"}},255:function(e,t,n){e.exports=n(319)},260:function(e,t,n){},261:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),r=n(91),c=n.n(r),l=(n(260),n(60)),u=(n(261),Object(a.createContext)(null)),o=n(115),s=n(50),h=n(243),d=n.n(h),m=n(160),f=function(e){var t=e.isGroup,n=e.idx,r=Object(a.useContext)(u),c=r.collegeData,o=r.setCollegeData,h=r.individualData,d=r.setIndividualData,f=t?c[n].preference:h[n].preference;return i.a.createElement(m.a,{onDragEnd:function(e){if(e.destination){var a=function(e,t,n){var a=Array.from(e),i=a.splice(t,1),r=Object(l.a)(i,1)[0];return a.splice(n,0,r),a}(f,e.source.index,e.destination.index);if(t){var i=c.map((function(e){return e.idx===n?Object(s.a)(Object(s.a)({},e),{},{preference:a}):e}));o(i)}else{var r=h.map((function(e){return e.idx===n?Object(s.a)(Object(s.a)({},e),{},{preference:a}):e}));d(r)}}}},i.a.createElement(m.c,{droppableId:"droppable",direction:"horizontal"},(function(e,n){return i.a.createElement("div",Object.assign({ref:e.innerRef,style:(a=n.isDraggingOver,{background:a?"lightblue":"lightgrey",display:"flex",padding:8,overflow:"auto"})},e.droppableProps),f.map((function(e,n){return i.a.createElement(m.b,{key:e,draggableId:"".concat(e),index:n},(function(n,a){return i.a.createElement("div",Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:(r=a.isDragging,l=n.draggableProps.style,Object(s.a)({userSelect:"none",padding:16,margin:"0 ".concat(8,"px 0 0"),background:r?"lightgreen":"grey"},l))}),t?h[e].name:c[e].name);var r,l}))})),e.placeholder);var a})))},p=function(){var e=Object(a.useContext)(u),t=e.individualData,n=e.setIndividualData;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",null,t.map((function(e,a){return i.a.createElement("div",{key:a,className:d.a.rowContainer},i.a.createElement("div",null,"Person ",a),i.a.createElement("div",null,"Name",i.a.createElement("input",{type:"text",id:"individual-".concat(a,"-name"),name:"name",value:t[a].name,onChange:function(e){return function(e,a){var i=t.map((function(t){return t.idx===a?Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},e.target.name,e.target.value)):t}));n(i)}(e,a)}})),i.a.createElement("div",null,"Preference",i.a.createElement(f,{isGroup:!1,idx:a})))}))))},g=n(245),v=n.n(g),y=function(){var e=Object(a.useContext)(u),t=e.collegeData,n=e.setCollegeData,r=function(e,a){var i=t.map((function(t){return t.idx===a?Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},e.target.name,e.target.value)):t}));n(i)};return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",null,t.map((function(e,n){return i.a.createElement("div",{key:n,className:v.a.rowContainer},i.a.createElement("div",null,"Group ",n),i.a.createElement("div",null,"Name",i.a.createElement("input",{type:"text",id:"college-".concat(n,"-name"),name:"name",value:t[n].name,onChange:function(e){return r(e,n)}})),i.a.createElement("div",null,"Quota",i.a.createElement("input",{type:"number",id:"college-".concat(n,"-quota"),name:"quota",value:t[n].quota,onChange:function(e){return r(e,n)}})),i.a.createElement("div",null,"Preference",i.a.createElement(f,{isGroup:!0,idx:n})))}))))},b=function(){var e=Object(a.useContext)(u),t=e.stuN,n=e.setStuN,r=e.colN,c=e.setColN,l=e.initiated,o=e.initiate,s=e.setCollegeData,h=e.setIndividualData,d=function(e){e.preventDefault(),s(m(r)),h(f(t)),o(!0)},m=function(e){for(var n=[],a=0;a<e;a++)n.push({idx:a,name:"Group ".concat(a),quota:0,preference:Array.from(Array(parseInt(t)).keys())});return n},f=function(e){for(var t=[],n=0;n<e;n++)t.push({idx:n,name:"Person ".concat(n),preference:Array.from(Array(parseInt(r)).keys())});return t};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("form",null,i.a.createElement("label",null,"No. of individuals (e.g. applicants/trainees/employees):"),i.a.createElement("br",null),i.a.createElement("input",{type:"number",id:"stuN",name:"stuN",value:t,onChange:function(e){return n(e.target.value)}}),i.a.createElement("br",null),i.a.createElement("label",null,"No. of groups (e.g. colleges/teams/departments):"),i.a.createElement("br",null),i.a.createElement("input",{type:"number",id:"colN",name:"colN",value:r,onChange:function(e){return c(e.target.value)}}),l?i.a.createElement("button",{onClick:d},"Reset"):i.a.createElement("button",{onClick:d},"Set up"))),l?i.a.createElement(i.a.Fragment,null,i.a.createElement(p,null),i.a.createElement(y,null)):null)},O=n(101),E=n(102),j=function(){function e(){Object(O.a)(this,e),this.count=0}return Object(E.a)(e,[{key:"createID",value:function(){var e=this.count;return this.count+=1,e}},{key:"reset",value:function(){this.count=0}}]),e}(),k=new j,x=function(){function e(t,n){Object(O.a)(this,e),this.id=k.createID(),this.matchedWith=null,this.nextProposal=0,this.proposedToAll=!1,this.name=t,this.priorityList=n,this.rankingOfMatch=-1}return Object(E.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("Person.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"proposeTo",value:function(){return this.nextProposal++,this.nextProposal===this.priorityList.length&&(this.proposedToAll=!0),this.priorityList[this.nextProposal-1]}},{key:"toString",value:function(){return"Student {id: "+this.id+", matchedWith: "+this.matchedWith+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,n){e+=0===n?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){this.rankingOfMatch=this.priorityList.indexOf(this.matchedWith)}},{key:"resetID",value:function(){k.reset()}}]),e}(),N=new j,L=function(){function e(t,n,a){Object(O.a)(this,e),this.id=N.createID(),this.matchedWith=[],this.appliedBy=[],this.quota=n,this.nextProposal=0,this.name=t,this.priorityList=a,this.rankingOfMatch=[]}return Object(E.a)(e,[{key:"setName",value:function(e){this.name=e}},{key:"reviewWaitingList",value:function(){var e=this;if(0===this.appliedBy.length)return null;var t=this.matchedWith,n=this.matchedWith.concat(this.appliedBy),a=this;return n.sort((function(e,t){var n=a.priorityList.indexOf(e),i=a.priorityList.indexOf(t);return n<i?-1:n>i?1:void 0})),n.length>this.quota?this.matchedWith=n.slice(0,this.quota):this.matchedWith=n,this.appliedBy=[],[this.matchedWith.filter((function(e){return!t.includes(e)})),t.filter((function(t){return!e.matchedWith.includes(t)}))]}},{key:"setPriorityList",value:function(e){if("object"!=typeof e)throw new Error("College.priorityList must be of type array but is: "+typeof e);this.priorityList=e}},{key:"toString",value:function(){return"College {id: "+this.id+", matchedWith: "+this.matchedWith.toString()+"}"}},{key:"printPriorityList",value:function(){if(this.priorityList){var e=this.id+" "+this.toString()+": ";return this.priorityList.forEach((function(t,n){e+=0===n?t:", "+t})),e}return this.id+": - no priorities -"}},{key:"setRankingOfMatch",value:function(){var e=this;this.matchedWith.forEach((function(t){e.rankingOfMatch.push(e.priorityList.indexOf(t))}))}},{key:"resetID",value:function(){N.reset()}}]),e}();var P=n(246),W=function(){function e(t,n){Object(O.a)(this,e),this.studentList=t,this.collegeList=n,this.log=[]}return Object(E.a)(e,[{key:"match",value:function(){for(var e=this,t=1,n=function(){var n=[];n.push("Round ".concat(t)),e.studentList.forEach((function(t){if(null===t.matchedWith&&!t.proposedToAll){var a=e.collegeList[t.proposeTo()];a.appliedBy.push(t.id),n.push("".concat(t.name," applied to his/her next favorite group which is ").concat(a.name))}})),n.push("---------------------------------------"),e.collegeList.forEach((function(t){if(n.push("".concat(t.name,":")),0===t.appliedBy.length)n.push("".concat(t.name," was not applied by any persons in this round"));else{n.push("".concat(t.name," had ").concat(t.quota-t.matchedWith.length," quota left")),n.push("".concat(t.name," was applied by ").concat(e.printStudentNames(t.appliedBy)," in this round"));var a=t.reviewWaitingList(),i=Object(l.a)(a,2),r=i[0],c=i[1];r.length>0?(n.push("".concat(t.name," combined the previous acceptees with the new applicants this round and made the following decisions in accordance to its preference list and its remaining quota:")),n.push("".concat(t.name," tentatively accepted ").concat(e.printStudentNames(r))),c.length>0&&n.push("".concat(t.name," dropped ").concat(e.printStudentNames(c))),r.forEach((function(n){e.studentList[n].matchedWith=t.id})),c.forEach((function(t){e.studentList[t].matchedWith=null}))):n.push("".concat(t.name," rejected all of its applicants in this round"))}n.push("---------------------------------------")})),t++,n.push("---------------------------------------"),e.log.push(n)};this.existsFreeStudents()&&t<=9999;)n();this.studentList.forEach((function(e){e.setRankingOfMatch()})),this.collegeList.forEach((function(e){e.setRankingOfMatch()})),this.studentList[0].resetID(),this.collegeList[0].resetID()}},{key:"existsFreeStudents",value:function(){var e,t=Object(P.a)(this.studentList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(null===n.matchedWith&&!n.proposedToAll)return!0}}catch(a){t.e(a)}finally{t.f()}return!1}},{key:"printStudentNames",value:function(e){var t=this,n=e.map((function(e){return t.studentList[e].name})).reduce((function(e,t){return e+" "+t}),"(");return n+=")"}}]),e}();var D=function(e,t){var n=function(e,t){var n=[],a=[];return e.forEach((function(e){var t=new x(e.name,e.preference);n.push(t)})),t.forEach((function(e){var t=new L(e.name,e.quota,e.preference);a.push(t)})),[n,a]}(e,t),a=Object(l.a)(n,2),i=a[0],r=a[1],c=new W(i,r);c.match();var u=e.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{matchedWith:i[t].matchedWith,isMatched:null!==i[t].matchedWith,matchedWithName:null!==i[t].matchedWith?r[i[t].matchedWith].name:null,rankingOfMatch:i[t].rankingOfMatch,preferenceNames:e.preference.map((function(e){return r[e].name}))})})),o=t.map((function(e,t){return Object(s.a)(Object(s.a)({},e),{},{matchedWith:r[t].matchedWith,quotaLeft:r[t].quota-r[t].matchedWith.length,matchedWithName:r[t].matchedWith.length>0?r[t].matchedWith.map((function(e){return i[e].name})):null,rankingOfMatch:r[t].rankingOfMatch,preferenceNames:e.preference.map((function(e){return i[e].name}))})})),h=u.map((function(e,t){return-1!==e.rankingOfMatch?{stuPreference:e.rankingOfMatch,colPreference:r[i[t].matchedWith].priorityList.indexOf(t),pairing:"".concat(i[t].name," <-> ").concat(r[i[t].matchedWith].name)}:null}));return h=h.filter((function(e){return null!==e})),[u,o,c.log,h]},C=function(){var e=Object(a.useContext)(u),t=e.initiated,n=e.collegeData,r=e.setCollegeResult,c=e.individualData,o=e.setIndividualResult,s=e.logDetails,h=e.setLogDetails,d=e.setAllPairs;return i.a.createElement("div",null,t?i.a.createElement("button",{onClick:function(e){e.preventDefault();var t=D(c,n),a=Object(l.a)(t,4),i=a[0],u=a[1],s=a[2],m=a[3];r(u),o(i),h(s),d(m)}},"Begin matching"):null,s.map((function(e,t){return i.a.createElement("div",{key:t},e.map((function(e,t){return i.a.createElement("p",{key:t},e)})))})))},M=(n(266),n(252)),S=function(e){var t=e.data,n=e.isStu,a=n?t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{rankingOfMatch:e.rankingOfMatch+1})})):t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{rankingOfMatch:e.rankingOfMatch.map((function(e){return e+1}))})})),r=n?{data:a,dataSchema:{idx:null,name:null,preferenceNames:null,matchedWithName:null,rankingOfMatch:null,isMatched:null},startCols:6,colHeaders:["ID","Name","Preference","Matched with","Ranking of match","Is Matched"],rowHeaders:!0,columns:[{data:"idx"},{data:"name"},{data:"preferenceNames"},{data:"matchedWithName"},{data:"rankingOfMatch"},{data:"isMatched"}],licenseKey:"non-commercial-and-evaluation"}:{data:a,dataSchema:{idx:null,name:null,quota:null,preferenceNames:null,matchedWithName:null,rankingOfMatch:null,quotaLeft:null},startCols:7,colHeaders:["ID","Name","Quota","Preference","Matched with","Ranking of match","Quota left"],rowHeaders:!0,columns:[{data:"idx"},{data:"name"},{data:"quota"},{data:"preferenceNames"},{data:"matchedWithName"},{data:"rankingOfMatch"},{data:"quotaLeft"}],licenseKey:"non-commercial-and-evaluation"};return i.a.createElement("div",null,i.a.createElement("div",null,n?"Matching result of the individuals:":"Matching result of the groups:"),i.a.createElement(M.a,{settings:r}))},w=(n(300),n(94)),I=function(e){var t=e.data,n=e.stuN,r=e.colN,c=Object(a.useState)(),u=Object(l.a)(c,2),o=u[0],h=u[1],d=t.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{stuPreference:e.stuPreference+1,colPreference:e.colPreference+1})}));return i.a.createElement(w.f,{xDomain:[-1,r+1],yDomain:[-1,n+1],getX:function(e){return e.stuPreference},getY:function(e){return e.colPreference},width:500,height:300,margin:50,onMouseLeave:function(){return h(null)}},i.a.createElement(w.c,{sizeHexagonsWithCount:!0,animation:!0,className:"hexbin-example",style:{stroke:"#125C77",strokeLinejoin:"round"},colorRange:["orange","cyan"],onValueMouseOver:function(e){h(e)},radius:15,data:d}),i.a.createElement(w.a,{style:{all:{fill:"#fff"}}}),i.a.createElement(w.e,null),i.a.createElement(w.g,null),i.a.createElement(w.b,{text:"Position of selected persons in preference list",className:"alt-x-label",xPercent:.1,yPercent:0,style:{transform:"rotate(90)",textAnchor:"start"}}),i.a.createElement(w.b,{text:"Position of selected groups in preference list",className:"alt-y-label",xPercent:.5,yPercent:.65,style:{textAnchor:"start"}}),o&&i.a.createElement(w.d,{xType:"literal",yType:"literal",getX:function(e){return o[0].stuPreference},getY:function(e){return o[0].colPreference},value:{"personal preference":o[0].stuPreference,"group preference":o[0].colPreference,match:1===o.length?o[0].pairing:"".concat(o[0].pairing," and ").concat(o.length-1," more"),frequency:o.length}}))},R=function(){var e=Object(a.useContext)(u),t=e.stuN,n=e.colN,r=e.individualResult,c=e.collegeResult,l=e.allPairs;return i.a.createElement("div",null,c.length>0?i.a.createElement(S,{isStu:!1,data:c}):null,r.length>0?i.a.createElement(S,{isStu:!0,data:r}):null,l.length>0?i.a.createElement(I,{data:l,stuN:t,colN:n}):null)};var q=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(0),o=Object(l.a)(c,2),s=o[0],h=o[1],d=Object(a.useState)(!1),m=Object(l.a)(d,2),f=m[0],p=m[1],g=Object(a.useState)([]),v=Object(l.a)(g,2),y=v[0],O=v[1],E=Object(a.useState)([]),j=Object(l.a)(E,2),k=j[0],x=j[1],N=Object(a.useState)([]),L=Object(l.a)(N,2),P=L[0],W=L[1],D=Object(a.useState)([]),M=Object(l.a)(D,2),S=M[0],w=M[1],I=Object(a.useState)([]),q=Object(l.a)(I,2),A=q[0],B=q[1],T=Object(a.useState)([]),F=Object(l.a)(T,2),H=F[0],_=F[1];return i.a.createElement(u.Provider,{value:{stuN:n,setStuN:r,colN:s,setColN:h,initiated:f,initiate:p,collegeData:y,setCollegeData:O,individualData:k,setIndividualData:x,collegeResult:P,setCollegeResult:W,individualResult:S,setIndividualResult:w,logDetails:A,setLogDetails:B,allPairs:H,setAllPairs:_}},i.a.createElement("div",{className:"App"},i.a.createElement("div",null,"many to one"),i.a.createElement("div",null,"stable matching"),i.a.createElement(b,null),i.a.createElement(C,null),i.a.createElement(R,null)))};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,null)),document.getElementById("root"))}},[[255,1,2]]]);
//# sourceMappingURL=main.1bd4a0a5.chunk.js.map